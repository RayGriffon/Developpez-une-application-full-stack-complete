<div class="profile-container">
  <a class="back-arrow" routerLink="/">
    &#8592;
  </a>
  
  <div class="profile-form" [formGroup]="form">
    <h1>Modifier le Profil</h1>

    <p>Nom d'utilisateur</p>
    <mat-form-field appearance="outline" floatLabel="always">
      <input matInput formControlName="username" />
      <mat-error *ngIf="usernameErrors">{{ usernameErrors }}</mat-error>
    </mat-form-field>

    <p>Nouveau mot de passe</p>
    <mat-form-field appearance="outline" floatLabel="always">
      <input matInput type="password" formControlName="newPassword" />
      <mat-error *ngIf="passwordErrors">{{ passwordErrors }}</mat-error>
    </mat-form-field>

    <div class="form-actions">
      <button mat-flat-button color="primary" (click)="submit()">Sauvegarder</button>
      <button mat-stroked-button (click)="cancelEdit()">Annuler</button>
    </div>

    <span class="error" *ngIf="onError">{{ onError }}</span>
    <span class="success" *ngIf="successMessage">{{ successMessage }}</span>

  </div>
</div>

<div *ngIf="passwordPopup" class="modal-overlay">
  <div class="modal">
    <h2>Confirmer les modifications</h2>
    <p>Veuillez entrer votre mot de passe actuel pour valider les changements.</p>
    <mat-form-field appearance="outline">
      <input matInput type="password" [(ngModel)]="password" />
    </mat-form-field>

    <div class="modal-actions">
      <button mat-flat-button color="primary" (click)="confirmPassword()">Confirmer</button>
      <button mat-stroked-button (click)="passwordPopup = false">Annuler</button>
    </div>
  </div>
</div>

<hr />

<div class="topics-container">
  <h2>Vos abonnements</h2>
  <div *ngIf="topics.length === 0">Aucun abonnement pour le moment.</div>

  <div class="topic-grid">
    <div class="topic" *ngFor="let topic of topics">
      <span>{{ topic.name }}</span>
      <p class="desc">{{ topic.description }}</p>
      <button class="subscribe-button" (click)="unsubscribe(topic)">
        Se d√©sabonner
      </button>
    </div>
  </div>
</div>
